<?xml version="1.0" encoding="UTF-8" ?>
<!--
  https://solr.apache.org/guide/solr/latest/configuration-guide/configuring-solrconfig-xml.html
  https://cwiki.apache.org/confluence/display/solr/SolrConfigXml
-->
<config>
  <luceneMatchVersion>9.8</luceneMatchVersion>

  <!--
    https://solr.apache.org/guide/solr/latest/configuration-guide/schema-factory.html
    Force use of schema.xml and disable any programmatic changes at run time.
  -->
  <schemaFactory class="ClassicIndexSchemaFactory"/>

  <requestHandler name="/select" class="solr.SearchHandler">
  </requestHandler>

  <!-- Return JSON by default. -->
  <requestHandler name="/query" class="solr.SearchHandler">
    <lst name="defaults">
      <str name="echoParams">explicit</str>
      <str name="wt">json</str>
      <str name="indent">true</str>
    </lst>
  </requestHandler>

  <!-- requestHandler for /update/json is added implicitly. -->

  <!-- Configure update processors. -->
  <updateProcessor
    class="solr.UUIDUpdateProcessorFactory"
    name="uuid"/>
  <updateProcessor
    class="solr.RemoveBlankFieldUpdateProcessorFactory"
    name="remove-blank"/>
  <updateProcessor
    class="solr.ParseBooleanFieldUpdateProcessorFactory"
    name="parse-boolean"/>
  <updateProcessor
    class="solr.ParseDateFieldUpdateProcessorFactory"
    name="parse-date"
  >
    <arr name="format">
      <str>yyyy-MM-dd['T'[HH:mm[:ss[.SSS]][z</str>
      <str>yyyy-MM-dd['T'[HH:mm[:ss[,SSS]][z</str>
      <str>yyyy-MM-dd HH:mm[:ss[.SSS]][z</str>
      <str>yyyy-MM-dd HH:mm[:ss[,SSS]][z</str>
      <str>[EEE, ]dd MMM yyyy HH:mm[:ss] z</str>
    </arr>
  </updateProcessor>

  <updateRequestProcessorChain
    name="nkod-request-professor-chai"
    default="true"
    processor="uuid,remove-blank,parse-boolean,parse-date"
  >
    <processor class="solr.LogUpdateProcessorFactory"/>
    <processor class="solr.DistributedUpdateProcessorFactory"/>
    <processor class="solr.RunUpdateProcessorFactory"/>
  </updateRequestProcessorChain>

</config>
